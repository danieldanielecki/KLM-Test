<section
  fxFlex="70"
  fxFlex.md="80"
  fxFlex.lt-md="90"
  fxFlexOffset="15"
  fxFlexOffset.md="10"
  fxFlexOffset.lt-md="5"
>
  <h1>Departures from Schiphol (AMS)</h1>

  <mat-form-field>
    <input
      matInput
      type="text"
      placeholder="Search for flight"
      (keyup)="applyFilter($event.target.value)"
    />
  </mat-form-field>
  <div
    fxLayoutAlign="center center"
    class="example-loading-shade"
    *ngIf="isLoadingResults || isRateLimitReached"
  >
    <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
    <h3 class="example-rate-limit-reached" *ngIf="isRateLimitReached">
      No results found &ndash; this might be a server problem. Please report it
      to the Administrator of this service.
    </h3>
  </div>
  <mat-table
    *ngIf="dataSource.data.length > 0"
    [dataSource]="dataSource"
    class="mat-elevation-z8"
  >
    <div class="spinner-container" *ngIf="(dataSource.loading$ | async)">
      <mat-spinner></mat-spinner>
    </div>
    <ng-container matColumnDef="flightNumber">
      <mat-header-cell *matHeaderCellDef>Flight (No.)</mat-header-cell>
      <mat-cell *matCellDef="let flight">{{ flight.flightNumber }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="flightDestination">
      <mat-header-cell *matHeaderCellDef>Destination</mat-header-cell>
      <mat-cell *matCellDef="let flight">{{
        flight.flightDestination
      }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="flightScheduled">
      <mat-header-cell *matHeaderCellDef>Schedule</mat-header-cell>
      <mat-cell *matCellDef="let flight">{{ flight.flightScheduled }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="flightTime">
      <mat-header-cell *matHeaderCellDef>Estimated</mat-header-cell>
      <mat-cell *matCellDef="let flight">{{ flight.flightTime }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="flightStatus">
      <mat-header-cell *matHeaderCellDef>Status</mat-header-cell>
      <mat-cell
        *matCellDef="let flight"
        [ngStyle]="{ color: getColor(flight.flightStatus) }"
      >
        <strong>{{ flight.flightStatus }}</strong>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
  </mat-table>

  <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</section>
